<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopStream | Single File E-Commerce</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans antialiased">

    <!-- App Container -->
    <div id="app" class="min-h-screen flex flex-col relative">
        <!-- Content injected by JS -->
    </div>

    <!-- JavaScript Logic -->
    <script>
        /**
         * MOCK DATA & CONFIGURATION
         */
        const PRODUCTS = [
            { id: 1, name: "Premium Wireless Headphones", price: 299.99, category: "Electronics", image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&q=80", rating: 4.8 },
            { id: 2, name: "Ergonomic Office Chair", price: 149.50, category: "Furniture", image: "https://images.unsplash.com/photo-1505843490538-5133c6c7d0e1?w=500&q=80", rating: 4.5 },
            { id: 3, name: "Mechanical Keyboard", price: 89.99, category: "Electronics", image: "https://images.unsplash.com/photo-1587829741301-dc798b91a603?w=500&q=80", rating: 4.7 },
            { id: 4, name: "Sustainable Water Bottle", price: 24.00, category: "Accessories", image: "https://images.unsplash.com/photo-1602143407151-01114195bc2d?w=500&q=80", rating: 4.2 },
            { id: 5, name: "Smart Fitness Watch", price: 199.00, category: "Electronics", image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&q=80", rating: 4.6 },
            { id: 6, name: "Leather Weekend Bag", price: 120.00, category: "Fashion", image: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=500&q=80", rating: 4.9 },
            { id: 7, name: "Minimalist Desk Lamp", price: 45.00, category: "Furniture", image: "https://images.unsplash.com/photo-1507473888900-52e1ad145924?w=500&q=80", rating: 4.3 },
            { id: 8, name: "Ceramic Coffee Set", price: 35.00, category: "Home", image: "https://images.unsplash.com/photo-1610701596007-11502861dcfa?w=500&q=80", rating: 4.4 },
        ];

        /**
         * STATE MANAGEMENT
         */
        const store = {
            user: JSON.parse(localStorage.getItem('user')) || null,
            cart: JSON.parse(localStorage.getItem('cart')) || [],
            orders: JSON.parse(localStorage.getItem('orders')) || [],
            view: 'home', // home, cart, checkout, login, register, profile
            searchQuery: '',
            categoryFilter: 'All',
            chatOpen: false,
            messages: [{from: 'bot', text: 'Hi! How can I help you today?'}]
        };

        // Helper to save state
        const persist = () => {
            localStorage.setItem('cart', JSON.stringify(store.cart));
            localStorage.setItem('user', JSON.stringify(store.user));
            localStorage.setItem('orders', JSON.stringify(store.orders));
            render();
        };

        /**
         * ACTIONS
         */
        const actions = {
            setView: (view) => { store.view = view; render(); },
            
            addToCart: (productId) => {
                const product = PRODUCTS.find(p => p.id === productId);
                const existing = store.cart.find(item => item.id === productId);
                if (existing) {
                    existing.qty++;
                } else {
                    store.cart.push({ ...product, qty: 1 });
                }
                showToast(`Added ${product.name} to cart`);
                persist();
            },

            removeFromCart: (productId) => {
                store.cart = store.cart.filter(item => item.id !== productId);
                persist();
            },

            updateQty: (productId, change) => {
                const item = store.cart.find(item => item.id === productId);
                if (item) {
                    item.qty += change;
                    if (item.qty <= 0) actions.removeFromCart(productId);
                    else persist();
                }
            },

            login: (email, password) => {
                // Mock Authentication
                if (email && password) {
                    store.user = { email, name: email.split('@')[0], id: Date.now() };
                    store.view = 'home';
                    persist();
                    showToast('Welcome back!');
                } else {
                    alert('Please enter valid credentials');
                }
            },

            logout: () => {
                store.user = null;
                store.view = 'home';
                persist();
                showToast('Logged out successfully');
            },

            placeOrder: (details) => {
                if (store.cart.length === 0) return;
                
                const order = {
                    id: 'ORD-' + Math.floor(Math.random() * 100000),
                    date: new Date().toLocaleDateString(),
                    items: [...store.cart],
                    total: store.cart.reduce((acc, item) => acc + (item.price * item.qty), 0),
                    status: 'Processing',
                    details: details
                };

                store.orders.unshift(order); // Add to beginning of history
                store.cart = []; // Clear cart
                store.view = 'success'; // Show success page
                persist();
            },

            sendMessage: (text) => {
                store.messages.push({from: 'user', text});
                render(); // Re-render chat
                setTimeout(() => {
                    store.messages.push({from: 'bot', text: "Thanks for your message! Our support team is currently offline in this demo, but we simulated a response."});
                    render();
                }, 1000);
            },

            toggleChat: () => {
                store.chatOpen = !store.chatOpen;
                render();
            }
        };

        /**
         * COMPONENTS (HTML GENERATORS)
         */
        
        const Navbar = () => {
            const cartCount = store.cart.reduce((acc, item) => acc + item.qty, 0);
            return `
                <nav class="bg-white shadow-sm sticky top-0 z-50">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="flex justify-between h-16">
                            <div class="flex items-center cursor-pointer" onclick="actions.setView('home')">
                                <i class="ph ph-shopping-bag text-3xl text-indigo-600"></i>
                                <span class="ml-2 text-xl font-bold text-gray-900">ShopStream</span>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="relative hidden md:block">
                                    <input type="text" 
                                        placeholder="Search products..." 
                                        class="bg-gray-100 rounded-full px-4 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 w-64 transition"
                                        oninput="store.searchQuery = this.value; render();"
                                        value="${store.searchQuery}"
                                    >
                                    <i class="ph ph-magnifying-glass absolute right-3 top-1.5 text-gray-400"></i>
                                </div>
                                <button onclick="actions.setView('cart')" class="relative p-2 text-gray-600 hover:text-indigo-600 transition">
                                    <i class="ph ph-shopping-cart text-2xl"></i>
                                    ${cartCount > 0 ? `<span class="absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">${cartCount}</span>` : ''}
                                </button>
                                ${store.user ? `
                                    <div class="relative group">
                                        <button class="flex items-center space-x-1 text-gray-700 hover:text-indigo-600">
                                            <i class="ph ph-user-circle text-2xl"></i>
                                            <span class="text-sm font-medium">${store.user.name}</span>
                                        </button>
                                        <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block border border-gray-100">
                                            <a onclick="actions.setView('profile')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer">My Orders</a>
                                            <a onclick="actions.logout()" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100 cursor-pointer">Logout</a>
                                        </div>
                                    </div>
                                ` : `
                                    <button onclick="actions.setView('login')" class="text-sm font-medium text-gray-700 hover:text-indigo-600">Login</button>
                                `}
                            </div>
                        </div>
                    </div>
                </nav>
            `;
        };

        const Hero = () => `
            <div class="bg-indigo-600 text-white py-12 mb-8">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                    <h1 class="text-4xl font-extrabold tracking-tight mb-4">Summer Collection 2024</h1>
                    <p class="text-lg text-indigo-100 mb-6">Discover the best trends in electronics, fashion, and home decor.</p>
                    <button onclick="document.getElementById('products').scrollIntoView({behavior: 'smooth'})" class="bg-white text-indigo-600 px-6 py-2 rounded-full font-bold hover:bg-gray-100 transition">Shop Now</button>
                </div>
            </div>
        `;

        const ProductCard = (product) => `
            <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition duration-300 overflow-hidden border border-gray-100 group">
                <div class="relative h-48 overflow-hidden bg-gray-200">
                    <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover group-hover:scale-105 transition duration-500">
                    <div class="absolute top-2 right-2 bg-white px-2 py-1 rounded text-xs font-bold text-gray-700 flex items-center shadow-sm">
                        <i class="ph-fill ph-star text-yellow-400 mr-1"></i> ${product.rating}
                    </div>
                </div>
                <div class="p-4">
                    <p class="text-xs text-indigo-600 font-semibold mb-1 uppercase tracking-wider">${product.category}</p>
                    <h3 class="text-gray-900 font-bold text-lg mb-2 truncate">${product.name}</h3>
                    <div class="flex items-center justify-between mt-4">
                        <span class="text-xl font-bold text-gray-900">$${product.price.toFixed(2)}</span>
                        <button onclick="actions.addToCart(${product.id})" class="bg-gray-900 text-white p-2 rounded-full hover:bg-indigo-600 transition shadow-lg transform active:scale-95">
                            <i class="ph ph-plus text-lg"></i>
                        </button>
                    </div>
                </div>
            </div>
        `;

        const HomeView = () => {
            const categories = ['All', ...new Set(PRODUCTS.map(p => p.category))];
            
            let filtered = PRODUCTS.filter(p => p.name.toLowerCase().includes(store.searchQuery.toLowerCase()));
            if (store.categoryFilter !== 'All') {
                filtered = filtered.filter(p => p.category === store.categoryFilter);
            }

            return `
                ${Hero()}
                <div id="products" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
                    <!-- Filters -->
                    <div class="flex flex-wrap gap-2 mb-8 justify-center">
                        ${categories.map(cat => `
                            <button 
                                onclick="store.categoryFilter = '${cat}'; render();"
                                class="px-4 py-1 rounded-full text-sm font-medium transition ${store.categoryFilter === cat ? 'bg-gray-900 text-white' : 'bg-white text-gray-600 border border-gray-200 hover:border-gray-900'}"
                            >
                                ${cat}
                            </button>
                        `).join('')}
                    </div>
                    
                    <!-- Grid -->
                    ${filtered.length > 0 ? `
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 fade-in">
                            ${filtered.map(ProductCard).join('')}
                        </div>
                    ` : `
                        <div class="text-center py-20 text-gray-500">
                            <i class="ph ph-magnifying-glass text-4xl mb-2"></i>
                            <p>No products found matching your criteria.</p>
                        </div>
                    `}
                </div>
            `;
        };

        const CartView = () => {
            const total = store.cart.reduce((acc, item) => acc + (item.price * item.qty), 0);
            
            return `
                <div class="max-w-4xl mx-auto px-4 py-8 fade-in w-full">
                    <h2 class="text-2xl font-bold mb-6">Shopping Cart (${store.cart.length} items)</h2>
                    
                    <div class="flex flex-col lg:flex-row gap-8">
                        <!-- Items -->
                        <div class="flex-1 space-y-4">
                            ${store.cart.length === 0 ? `
                                <div class="bg-white p-8 rounded-lg shadow-sm text-center">
                                    <p class="text-gray-500 mb-4">Your cart is empty.</p>
                                    <button onclick="actions.setView('home')" class="text-indigo-600 font-medium hover:underline">Continue Shopping</button>
                                </div>
                            ` : store.cart.map(item => `
                                <div class="bg-white p-4 rounded-lg shadow-sm flex items-center gap-4">
                                    <img src="${item.image}" class="w-20 h-20 object-cover rounded bg-gray-100">
                                    <div class="flex-1">
                                        <h3 class="font-bold text-gray-900">${item.name}</h3>
                                        <p class="text-gray-500 text-sm">$${item.price.toFixed(2)}</p>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <button onclick="actions.updateQty(${item.id}, -1)" class="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center">-</button>
                                        <span class="w-4 text-center">${item.qty}</span>
                                        <button onclick="actions.updateQty(${item.id}, 1)" class="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center">+</button>
                                    </div>
                                    <div class="text-right w-20">
                                        <p class="font-bold">$${(item.price * item.qty).toFixed(2)}</p>
                                        <button onclick="actions.removeFromCart(${item.id})" class="text-red-500 text-xs mt-1 hover:underline">Remove</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>

                        <!-- Summary -->
                        ${store.cart.length > 0 ? `
                            <div class="w-full lg:w-80 h-fit bg-white p-6 rounded-lg shadow-sm">
                                <h3 class="font-bold text-lg mb-4">Order Summary</h3>
                                <div class="flex justify-between mb-2 text-gray-600"><span>Subtotal</span><span>$${total.toFixed(2)}</span></div>
                                <div class="flex justify-between mb-4 text-gray-600"><span>Tax (5%)</span><span>$${(total * 0.05).toFixed(2)}</span></div>
                                <div class="border-t pt-4 flex justify-between font-bold text-lg mb-6"><span>Total</span><span>$${(total * 1.05).toFixed(2)}</span></div>
                                <button onclick="actions.setView(store.user ? 'checkout' : 'login')" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition">
                                    ${store.user ? 'Proceed to Checkout' : 'Login to Checkout'}
                                </button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        };

        const CheckoutView = () => {
            if (!store.user) { actions.setView('login'); return ''; }
            const total = store.cart.reduce((acc, item) => acc + (item.price * item.qty), 0) * 1.05;

            return `
                <div class="max-w-3xl mx-auto px-4 py-8 fade-in w-full">
                    <button onclick="actions.setView('cart')" class="mb-4 text-sm text-gray-500 hover:text-gray-900 flex items-center"><i class="ph ph-arrow-left mr-1"></i> Back to Cart</button>
                    <h2 class="text-2xl font-bold mb-6">Checkout</h2>
                    
                    <form onsubmit="event.preventDefault(); actions.placeOrder({
                        address: this.address.value,
                        city: this.city.value,
                        zip: this.zip.value,
                        card: this.card.value
                    })" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm md:col-span-2 space-y-4">
                            <h3 class="font-bold border-b pb-2">Shipping Information</h3>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Full Name</label>
                                <input type="text" value="${store.user.name}" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50" readonly>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Address</label>
                                <input type="text" name="address" required placeholder="123 Main St" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">City</label>
                                    <input type="text" name="city" required placeholder="New York" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">ZIP Code</label>
                                    <input type="text" name="zip" required placeholder="10001" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-sm md:col-span-2 space-y-4">
                            <h3 class="font-bold border-b pb-2">Payment Details</h3>
                            <div class="flex gap-2 mb-2">
                                <div class="bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs">Visa</div>
                                <div class="bg-red-50 text-red-700 px-2 py-1 rounded text-xs">Mastercard</div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Card Number (Simulated)</label>
                                <input type="text" name="card" required placeholder="0000 0000 0000 0000" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Expiry</label>
                                    <input type="text" placeholder="MM/YY" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">CVC</label>
                                    <input type="text" placeholder="123" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
                                </div>
                            </div>
                        </div>

                        <div class="md:col-span-2">
                            <button type="submit" class="w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition shadow-lg">
                                Pay $${total.toFixed(2)}
                            </button>
                        </div>
                    </form>
                </div>
            `;
        };

        const LoginView = () => `
            <div class="flex-1 flex items-center justify-center p-4 fade-in">
                <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-md">
                    <h2 class="text-2xl font-bold text-center mb-6">Welcome Back</h2>
                    <form onsubmit="event.preventDefault(); actions.login(this.email.value, this.password.value)" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Email Address</label>
                            <input type="email" name="email" required class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Password</label>
                            <input type="password" name="password" required class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-md font-bold hover:bg-indigo-700 transition">Sign In</button>
                    </form>
                    <p class="mt-4 text-center text-sm text-gray-600">
                        Don't have an account? <span class="text-indigo-600 cursor-pointer font-medium">Register (Mock)</span>
                    </p>
                    <div class="mt-4 bg-yellow-50 p-2 rounded text-xs text-yellow-800">
                        <strong>Demo Tip:</strong> Use any email/password. No backend validation.
                    </div>
                </div>
            </div>
        `;

        const ProfileView = () => {
            if (!store.user) { actions.setView('login'); return ''; }
            return `
                <div class="max-w-4xl mx-auto px-4 py-8 w-full fade-in">
                    <h2 class="text-2xl font-bold mb-6">My Account</h2>
                    <div class="bg-white p-6 rounded-lg shadow-sm mb-6">
                        <h3 class="font-bold text-lg mb-2">Profile Details</h3>
                        <p class="text-gray-600">Name: ${store.user.name}</p>
                        <p class="text-gray-600">Email: ${store.user.email}</p>
                    </div>

                    <h3 class="font-bold text-xl mb-4">Order History</h3>
                    <div class="space-y-4">
                        ${store.orders.length === 0 ? '<p class="text-gray-500">No orders placed yet.</p>' : store.orders.map(order => `
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-bold text-indigo-600">${order.id}</span>
                                    <span class="text-sm text-gray-500">${order.date}</span>
                                </div>
                                <div class="mb-2">
                                    <span class="inline-block px-2 py-0.5 rounded-full text-xs font-bold bg-yellow-100 text-yellow-800">${order.status}</span>
                                </div>
                                <div class="space-y-1 mb-3">
                                    ${order.items.map(i => `<p class="text-sm text-gray-600">${i.qty}x ${i.name}</p>`).join('')}
                                </div>
                                <div class="border-t pt-2 font-bold text-right">
                                    Total: $${(order.total * 1.05).toFixed(2)}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        };

        const SuccessView = () => `
            <div class="flex-1 flex flex-col items-center justify-center p-4 fade-in text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4">
                    <i class="ph ph-check text-4xl text-green-600"></i>
                </div>
                <h2 class="text-3xl font-bold text-gray-900 mb-2">Order Confirmed!</h2>
                <p class="text-gray-600 mb-8 max-w-md">Thank you for your purchase. Your order has been received and is being processed.</p>
                <div class="space-x-4">
                    <button onclick="actions.setView('profile')" class="bg-gray-900 text-white px-6 py-2 rounded-lg font-medium hover:bg-gray-800">View Order</button>
                    <button onclick="actions.setView('home')" class="text-indigo-600 font-medium hover:underline">Continue Shopping</button>
                </div>
            </div>
        `;

        const ChatWidget = () => `
            <div class="fixed bottom-6 right-6 z-50 flex flex-col items-end">
                ${store.chatOpen ? `
                    <div class="bg-white rounded-lg shadow-xl w-80 h-96 mb-4 flex flex-col overflow-hidden border border-gray-200 fade-in">
                        <div class="bg-indigo-600 p-4 text-white flex justify-between items-center">
                            <span class="font-bold">Support Chat</span>
                            <button onclick="actions.toggleChat()" class="hover:text-gray-200"><i class="ph ph-x"></i></button>
                        </div>
                        <div class="flex-1 p-4 overflow-y-auto space-y-3 bg-gray-50">
                            ${store.messages.map(msg => `
                                <div class="flex ${msg.from === 'user' ? 'justify-end' : 'justify-start'}">
                                    <div class="max-w-[80%] rounded-lg px-3 py-2 text-sm ${msg.from === 'user' ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-800'}">
                                        ${msg.text}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="p-3 border-t bg-white">
                            <form onsubmit="event.preventDefault(); if(this.msg.value.trim()){actions.sendMessage(this.msg.value); this.msg.value='';}" class="flex gap-2">
                                <input name="msg" type="text" placeholder="Type a message..." class="flex-1 border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:border-indigo-500">
                                <button type="submit" class="text-indigo-600 font-bold"><i class="ph ph-paper-plane-right text-xl"></i></button>
                            </form>
                        </div>
                    </div>
                ` : ''}
                <button onclick="actions.toggleChat()" class="bg-indigo-600 hover:bg-indigo-700 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition transform hover:scale-110">
                    <i class="ph ph-chat-circle-text text-3xl"></i>
                </button>
            </div>
        `;

        const Toast = () => `
            <div id="toast" class="fixed top-4 right-4 bg-gray-900 text-white px-6 py-3 rounded shadow-lg transform translate-y-[-150%] transition duration-300 z-[60]">
                Notification
            </div>
        `;

        /**
         * MAIN RENDER LOOP
         */
        const render = () => {
            const app = document.getElementById('app');
            
            // Router Logic
            let content = '';
            switch(store.view) {
                case 'home': content = HomeView(); break;
                case 'cart': content = CartView(); break;
                case 'checkout': content = CheckoutView(); break;
                case 'login': content = LoginView(); break;
                case 'profile': content = ProfileView(); break;
                case 'success': content = SuccessView(); break;
                default: content = HomeView();
            }

            app.innerHTML = `
                ${Navbar()}
                <main class="flex-1 flex flex-col w-full">
                    ${content}
                </main>
                <footer class="bg-gray-800 text-gray-300 py-8 mt-auto">
                    <div class="max-w-7xl mx-auto px-4 text-center">
                        <p>&copy; 2024 ShopStream. Built for demo purposes.</p>
                    </div>
                </footer>
                ${ChatWidget()}
                ${Toast()}
            `;
        };

        // UI Helpers
        const showToast = (message) => {
            const toast = document.getElementById('toast');
            if(toast) {
                toast.innerText = message;
                toast.style.transform = 'translateY(0)';
                setTimeout(() => {
                    toast.style.transform = 'translateY(-150%)';
                }, 3000);
            }
        };

        // Initialize
        window.addEventListener('load', () => {
            render();
        });

    </script>
</body>
</html>